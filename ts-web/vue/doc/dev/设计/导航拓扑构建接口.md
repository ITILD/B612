# 导航拓扑构建接口

<br />

## 导航路线

**1\. 查询导航图层所有路线**

###### 接口功能

> 查询导航图层（包含 geom 的）所有路线和附属信息

###### URL

> [routerData](routerData)

###### 支持格式

> JSON

###### HTTP 请求方式

> GET

###### 请求参数

> | 参数 | 必选 | 类型   | 说明            |
> | :--- | :--- | :----- | --------------- |
> | pid  | ture | string | 请求的父图层 id |

###### 返回 geojson

> | 返回字段    | 字段类型 | 说明                             |
> | :---------- | :------- | :------------------------------- |
> | gid         | int      | 返回结果状态。0：正常；1：错误。 |
> | geom        | geojson  | 所属公司名                       |
> | source      | string   | 起点编号                         |
> | source_type | string   | 起点类型 0 电梯 1 楼梯 2 门 .... |
> | target      | string   | 终点编号                         |
> | target_type | string   | 终点类型 0 电梯 1 楼梯 2 门 .... |

###### 接口示例

> 地址：[routerData?pid="AC8B5F83-4BAC-46E1-AF16-EAE30E257AC1"]()

```js
{
    "id": 0
}
```

**2\. 查询单个路线信息**

###### 接口功能

> 查询单个路线的信息

###### URL

> [getOneRouter](getOneRouter)

###### 支持格式

> JSON

###### HTTP 请求方式

> GET

###### 请求参数

> | 参数 | 必选 | 类型 | 说明             |
> | :--- | :--- | :--- | ---------------- |
> | gid  | ture | int  | 单个线数据的 gid |

###### 返回 geojson

> | 返回字段    | 字段类型 | 说明                             |
> | :---------- | :------- | :------------------------------- |
> | gid         | int      | 返回结果状态。0：正常；1：错误。 |
> | geom        | geojson  | 所属公司名                       |
> | source      | string   | 起点编号                         |
> | source_type | string   | 起点类型 0 电梯 1 楼梯 2 门 .... |
> | target      | string   | 终点编号                         |
> | target_type | string   | 终点类型 0 电梯 1 楼梯 2 门 .... |

**3\. 添加单个路线**

###### 接口功能

> 添加单个路线

###### URL

> [addOneRouter](addOneRouter)

###### 支持格式

> JSON

###### HTTP 请求方式

> POST

###### 请求参数

> | 参数        | 类型    | 说明                             |
> | :---------- | :------ | :------------------------------- |
> | pid         | int     | 返回结果状态。0：正常；1：错误。 |
> | geom        | geojson | 所属公司名                       |

###### 返回

**4\. 更新单个路线**

###### 接口功能

> 更新单个路线

###### URL

> [updateOneRouter](updateOneRouter)

###### 支持格式

> JSON

###### HTTP 请求方式

> GET

###### 请求参数

> | 参数 | 必选 | 类型 | 说明             |
> | :--- | :--- | :--- | ---------------- |
> | gid  | ture | int  | 单个线数据的 gid |

**5\. 删除单个路线**

###### 接口功能

> 删除单个路线

###### URL

> [deleteOneRouter](deleteOneRouter)

###### 支持格式

> JSON

###### HTTP 请求方式

> GET

###### 请求参数

> | 参数 | 必选 | 类型 | 说明             |
> | :--- | :--- | :--- | ---------------- |
> | gid  | ture | int  | 单个线数据的 gid |
>
> <br />

## 导航节点

**1\. 查询所有节点列表**

###### 接口功能

> 查询所有节点列表

###### URL

> [selectRouterPoints](selectRouterPoints)

###### 支持格式

> JSON

###### HTTP 请求方式

> GET

###### 请求参数

无    条件target ==-source 且不为空
###### 返回参数   另一点所在线编号和
返回数组

> | 参数       | 必选 | 类型 | 说明   |
> | :--------- | :--- | :--- | ------ |
> | code | ture | int  | code | 节点号
> | rout_type | ture | int  | 点类型 |
> | name | ture | int  | 点名 |


**2\. 查询单个节点**

###### 接口功能

> 查询单个节点

###### URL

> [updateRouterPoint](updateRouterPoint)

###### 支持格式

> JSON

###### HTTP 请求方式

> GET

###### 请求参数

> | 参数        | 必选 | 类型 | 说明             |
> | :---------- | :--- | :--- | ---------------- |
> | gid         | ture | int  | 单个线数据的 gid |
> | code | ture | int  | 起点/终点code         |
> | code_type | ture | string  | 'source'/'target'起点或终点  |


#### 返回
> | 参数        | 必选 | 类型 | 说明             |
> | :---------- | :--- | :--- | ---------------- |

> | point_type | ture | int  | 点类型         |
> | name | ture | int  | 节点名         |
> | point_relation | ture | int  |关联节点数组 |



**3\. 更新单个节点**

###### 接口功能

> 更新单个节点

###### URL

> [updateRouterPoint](updateRouterPoint)

###### 支持格式

> JSON

###### HTTP 请求方式

> GET

###### 请求参数

> | 参数        | 必选 | 类型 | 说明             |
> | :---------- | :--- | :--- | ---------------- |
> | gid         | ture | int  | 单个线数据的 gid |
> | source | ture | int  | 起点code         |
> | target | ture | int  | 终点code          |

> | point_type | ture | int  | 点类型         |
> | name | ture | int  | 节点名         |
> | point_relation_add | ture | int  |添加关联节点数组|
> | point_relation_delete | ture | int  |删除关联节点数组|

#### 返回
true/false










